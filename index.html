<!DOCTYPE html>
<html>
<head>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.css' rel='stylesheet' />
    <title>mapbox gl js + esri vector tile</title>
</head>

<body>
    <div id='map' style='width: 1000px; height: 900px;' />

    <script>

	var simple = {
"sprite":"https://www.arcgis.com/sharing/rest/content/items/850db44b9eb845d3bd42b19e8aa7a024/resources/styles/../sprites/sprite",
"glyphs":"https://www.arcgis.com/sharing/rest/content/items/850db44b9eb845d3bd42b19e8aa7a024/resources/styles/../fonts/{fontstack}/{range}.pbf",
"sources":{"esri":{"url":"https://basemaps.arcgis.com/b2/arcgis/rest/services/World_Basemap/VectorTileServer","type":"vector"}},
"layers" : [
  {
  	"paint": {
  		"background-color": "#222326"
  	},
  	"type": "background",
  	"id": "background"
  },
  {
  		"layout": {
  			"text-letter-spacing": 0.05,
  			"symbol-avoid-edges": true,
  			"text-allow-overlap": false,
  			"icon-padding": 1,
  			"text-padding": 1,
  			"text-font": ["Arial Regular"],
  			"text-anchor": "center",
  			"icon-image": "City small scale/x large admin0 capital",
  			"text-field": "{_name}",
  			"text-size": 12,
  			"text-max-width": 8
  		},
  		"paint": {
  			"text-color": "#dddcde",
  			"text-halo-width": 1.33,
  			"text-halo-color": "#414042"
  		},
  		"filter": ["==", "_symbol", 0],
  		"source": "esri",
  		"source-layer": "City small scale",
  		"maxzoom": 10,
  		"type": "symbol",
  		"id": "City small scale/x large admin0 capital"
  	},
  {
  	"layout": {},
  	"paint": {
  		"fill-color": "#474648"
  	},
  	"source": "esri",
  	"minzoom": 0,
  	"source-layer": "Land",
  	"type": "fill",
  	"id": "Land"
  }
  ],
"version":8,
 "sources": {
    "esri": {
      "type": "vector",
      "tiles": ["https://basemaps.arcgis.com/b2/arcgis/rest/services/World_Basemap/VectorTileServer/tile/{z}/{x}/{y}.pbf"]
    }
  }
}

	;

var map = new mapboxgl.Map({
    container: 'map',
    style: simple,
    zoom: 0,
    center: [-14, 35]
});


// When a click event occurs on a feature in the states layer, open a popup at the
// location of the click, with description HTML from its properties.
map.on('click', 'City small scale', function (e) {
  console.log(e.features[0].properties)
    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(e.features[0].properties)
        .addTo(map);
});

    </script>
</body>
</html>
